<ng-container *ngIf="userState$ | async as state">
    <div class="wrapper" *ngIf="players.length >= 2">
        <ng-container *ngIf="isEliminationMode && activeCompetition; else leagueMode">
            <app-elimination-bracket (playersSelected)="onClickRound($event)" [competition]="activeCompetition"
                [rounds]="eliminationRounds"></app-elimination-bracket>
        </ng-container>
    </div>
    <ng-template #leagueMode>
        <div class="league-wrapper">
            <p *ngIf="matches?.length === 0" class="mt-4 text-center">
                {{ "matches_not_found" | translate }}
            </p>
            <section style="padding: 0;">
                <app-matches *ngIf="matches?.length > 0" [matches]="matches" (matchEmitter)="setClickedMatch($event)">
                </app-matches>
                <div class="buttons-home-matches">
                    <div class="button-container mt-3">
                        <button type="button" (click)="modalService.openModal(modalService.MODALS['ADD_MATCH'])"
                            class="add-match">
                            {{ "add_match" | translate}}
                            <span class="m-1"></span>
                            <i class="fa fa-file-text-o" aria-hidden="true"></i>
                        </button>
                        <p class="small text-center mt-3">
                            {{ "add_match_description" | translate }}
                        </p>
                    </div>
                    <div class="button-container">
                        <div>
                            <button type="button" class="bg-secondary position-relative"
                                (click)="modalService.openModal(modalService.MODALS['MANUAL_POINTS'])">
                                {{ "add_manual_set_points" | translate }}
                                <div class="circle-live"></div>
                            </button>
                        </div>
                        <p class="small text-center mt-3">
                            {{ "add_manual_set_points_description" | translate }}
                        </p>
                    </div>
                </div>
            </section>
            <section>
                <app-stats *ngIf="matches?.length > 0"></app-stats>
            </section>
        </div>
    </ng-template>
    <app-modal [label]="'add_match'" *ngIf="modalService.isActiveModal(modalService.MODALS['ADD_MATCH'])"
        [modalName]="modalService.MODALS['ADD_MATCH']">
        <app-add-match-modal [players]="players" [player1]="player1Selected"
            [player2]="player2Selected"></app-add-match-modal>
    </app-modal>
    <app-modal [label]="'match_details'" *ngIf="modalService.isActiveModal(modalService.MODALS['SHOW_MATCH'])"
        [modalName]="modalService.MODALS['SHOW_MATCH']">
        <app-show-match-modal [match]="clickedMatch"></app-show-match-modal>
    </app-modal>
    <app-bottom-navbar class="bottom-navbar"></app-bottom-navbar>
</ng-container>

<app-modal [fullscreen]="true" [label]="'manual_points'"
    *ngIf="modalService.isActiveModal(modalService.MODALS['MANUAL_POINTS'])"
    [modalName]="modalService.MODALS['MANUAL_POINTS']" class="manual-points-modal">
    <app-manual-points [players]="players" [player1]="player1Selected" [player2]="player2Selected"></app-manual-points>
</app-modal>