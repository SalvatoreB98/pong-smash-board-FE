<div class="bracket-container" #bracketContainer (mousedown)="onDragStart($event)" (mouseup)="onDragEnd()"
    (mouseleave)="onDragEnd()" (mousemove)="onDragMove($event)" (wheel)="onWheel($event)"
    (touchstart)="onDragStart($event)" (touchmove)="onDragMove($event)" (touchend)="onDragEnd()">

    <div class="bracket-controls">
        <button (click)="zoomOut()">âˆ’</button>
        <span>{{ zoomLevel | number: '1.0-1' }}x</span>
        <button (click)="zoomIn()">+</button>
    </div>

    <div class="bracket-grid-wrapper">
        <div class="bracket-scale" #bracketScale>
            <div class="bracket-grid" #bracketGrid>
                <ng-container *ngFor="let round of rounds; let col = index">
                    <ng-container *ngFor="let match of round.matches; let i = index">
                        <div class="match" [style.gridColumn]="col + 1" [style.gridRow]="getGridRow(col, i)">
                            <div class="player">
                                <img [src]="match.slots[0]?.player?.image_url || 'default-player.jpg'" alt="" />
                                <span>{{ match.slots[0]?.player?.nickname || 'TBD' }}</span>
                                <strong *ngIf="match.player1Score !== null">{{ match.player1Score }}</strong>
                            </div>

                            <div class="player">
                                <img [src]="match.slots[1]?.player?.image_url || 'default-player.jpg'" alt="" />
                                <span>{{ match.slots[1]?.player?.nickname || 'TBD' }}</span>
                                <strong *ngIf="match.player2Score !== null">{{ match.player2Score }}</strong>
                            </div>
                        </div>
                    </ng-container>
                </ng-container>
            </div>
        </div>
    </div>
</div>