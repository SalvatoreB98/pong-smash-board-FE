<div class="manual-points" [ngClass]="{ mobile: isMobile, desktop: !isMobile }">
    <ng-container *ngIf="!selectingPlayer">
        <div class="sets-container">
            {{ "sets" | translate }}: {{player1SetsPoints}} - {{player2SetsPoints}}
        </div>
        <div class="microphone-container text-center">
            <app-voice-score (scoreChanged)="onScoreChanged($event)"></app-voice-score>
        </div>
        <div class="container-points">
            <div #effectLeft class="points box box1">
                <button class="tap" (click)="changePoint(1)">
                    <span>{{player1Points}}</span>
                    <div class="player-indicator left">
                        <img [src]="player1?.image_url || './default-player.jpg'" alt="">
                        <div> {{ player1?.nickname }}</div>
                    </div>
                </button>
                <button class="minus" (click)="subtractPoint(1)"><i class="fa-solid fa-minus"></i></button>
            </div>
            <div #effectRight class="points box box2">
                <button class="tap" (click)="changePoint(2)">
                    <span>{{player2Points}}</span>
                    <div class="player-indicator right">
                        <img [src]="player2?.image_url || './default-player.jpg'" alt="">
                        <div> {{ player2?.nickname }}</div>
                    </div>
                </button>
                <button class="minus" (click)="subtractPoint(2)"><i class="fa-solid fa-minus"></i></button>
            </div>
        </div>

        <div class="actions">
            <button type="button" class="bg-primary" (click)="onSave()"
                [disabled]="isPointsError(player1Points, player2Points, maxPoints)">
                {{'save_points' | translate}}
            </button>
            <button type="button" class="reset" (click)="onReset()">
                {{'reset_points' | translate}}
            </button>
        </div>
    </ng-container>

    <div *ngIf="selectingPlayer" class="container my-4">
        <form class="form-dark" [formGroup]="playersForm">
            <p class="text-center mb-4">
                {{ 'manual_points_description' | translate }}
            </p>

            <div class="row align-items-center justify-content-center">
                <!-- Player 1 -->
                <div class="col-12 col-md-5 mb-3 mb-md-0">
                    <app-select-player [players]="getPlayers(1)" [playerNumber]="'1'"
                        (playerSelected)="setPlayer($event)">
                    </app-select-player>
                </div>

                <!-- VS -->
                <div class="col-12 col-md-2 text-center mb-3 mb-md-0 fw-bold">
                    {{ 'vs' | translate }}
                </div>

                <!-- Player 2 -->
                <div class="col-12 col-md-5">
                    <app-select-player [players]="getPlayers(2)" [playerNumber]="'2'"
                        (playerSelected)="setPlayer($event)">
                    </app-select-player>
                </div>
            </div>

            <div class="d-flex justify-content-center mt-4">
                <button type="button" class="btn btn-primary px-4 position-relative" (click)="onContinue()"
                    [disabled]="playersForm.invalid">
                    {{ 'continue' | translate }}
                </button>
            </div>
        </form>
    </div>

</div>