<div class="summary competition-modal animate-in">
  <div class="modal-heading">
    <h3>{{ competition?.name }}</h3>
    <p class="meta-created" *ngIf="competition?.created_at">
      {{ competition?.created_at | date: 'medium' }}
    </p>
  </div>

  <div class="meta-grid">
    <div class="meta-item">
      <span class="meta-icon" aria-hidden="true">ğŸ†</span>
      <div class="meta-content">
        <span class="label">{{ "best_of" | translate }}</span>
        <span class="value">{{ competition?.['sets_type'] }}</span>
      </div>
    </div>

    <div class="meta-item">
      <span class="meta-icon" aria-hidden="true">ğŸ¯</span>
      <div class="meta-content">
        <span class="label">{{ "points_number" | translate }}</span>
        <span class="value">{{ competition?.['points_type'] }}</span>
      </div>
    </div>

    <div class="meta-item">
      <span class="meta-icon" aria-hidden="true">ğŸ“‚</span>
      <div class="meta-content">
        <span class="label">{{ "type" | translate }}</span>
        <span class="value competition-type">
          {{ ('competition_type_' + (competition?.type || 'league')) | translate }}
          <i [ngClass]="['fa-solid', getCompetitionTypeIcon(competition?.type)]"></i>
        </span>
      </div>
    </div>

    <div class="meta-item" *ngIf="competition?.['admin']">
      <span class="meta-icon" aria-hidden="true">ğŸ‘¤</span>
      <div class="meta-content">
        <span class="label">{{ "admin" | translate }}</span>
        <span class="value">{{ competition?.['admin']?.nickname || competition?.['admin']?.name }}</span>
      </div>
    </div>

    <div class="meta-item" *ngIf="competition?.management !== 'admin'">
      <span class="meta-icon" aria-hidden="true">ğŸ”</span>
      <div class="meta-content">
        <span class="label">{{ "invitation_code" | translate }}</span>
        <span class="value code">{{ competition?.['code'] }}</span>
      </div>
    </div>
  </div>

  <div class="players-section">
    <div class="section-header">
      <h4>{{ "players" | translate }}</h4>
    </div>

    <ng-container *ngIf="!isEmpty(competition?.['players']); else noPlayers">
      <div class="players-grid">
        <div class="player-card" *ngFor="let p of competition?.['players']">
          <div class="player-avatar" aria-hidden="true" [ngStyle]="{'background-image': 'url(' + (p.image_url || '/default-player.jpg') + ')'}">
            {{ p.nickname | slice:0:2 | uppercase }} 
          </div>
          <span class="player-nickname">{{ p.nickname }}</span>
        </div>
      </div>
    </ng-container>
    <ng-template #noPlayers>
      <p class="empty-state">{{ "no_players" | translate }}</p>
    </ng-template>
  </div>

  <div class="actions">
    <button type="button" class="cta button-primary-ping" id="add-players-button"
      (click)="modalService.openModal(modalService.MODALS['ADD_PLAYERS'])">
      <i class="fa-solid fa-user-plus"></i>
      <span> {{ "add_players" | translate }}</span>
    </button>
    <button type="button" class="cancel text-center" (click)="modalService.closeModal()">
      {{ "close" | translate }}
    </button>
  </div>
</div>
