<app-step-indicator [activeStep]="step" [totalSteps]="6"></app-step-indicator>

<!-- STEP 1 – MANAGEMENT -->
<div class="steps-wrapper" *ngIf="step == 1">
    <form class="form-card mt-3" [formGroup]="managementForm">
        <div class="field">
            <span class="label">{{ 'management_type' | translate }}</span>
            <div class="container-choose">
                <div class="segmented" role="radiogroup" [attr.aria-label]="'management_type' | translate">
                    <label class="seg-item">
                        <input type="radio" value="admin" formControlName="managementCtrl" />
                        <span class="large-img-select">
                            <span>{{ 'admin_only' | translate }}</span>
                            <div class="mt-4">
                                <i class="fa fa-user fa-3x" aria-hidden="true"></i>
                                <i class="fa fa-lock ms-1" aria-hidden="true"></i>
                            </div>
                            <p class="mt-3">{{ "management_type_admin" | translate }}</p>
                        </span>
                    </label>
                </div>
                <div class="segmented" role="radiogroup" [attr.aria-label]="'management_type' | translate">
                    <label class="seg-item">
                        <input type="radio" value="self" formControlName="managementCtrl" />
                        <span class="large-img-select">
                            <span>{{ 'free_management' | translate }}</span>
                            <div class="mt-4">
                                <i class="fa fa-users fa-3x" aria-hidden="true"></i>
                                <i class="fa fa-unlock" aria-hidden="true"></i>
                            </div>
                            <p class="mt-3">{{ "management_type_self" | translate }}</p>
                        </span>
                    </label>
                </div>
            </div>
            <span class="label mt-5">{{ 'is_part_of_competition' | translate }}</span>
            <div class="segmented" role="radiogroup" [attr.aria-label]="'is_part_of_competition' | translate">
                <label class="seg-item">
                    <input type="radio" formControlName="isPartOfCompetitionCtrl" [value]="true" />
                    <span>{{ 'yes' | translate }}</span>
                </label>
                <label class="seg-item">
                    <input type="radio" formControlName="isPartOfCompetitionCtrl" [value]="false" />
                    <span>{{ 'no' | translate }}</span>
                </label>
            </div>
        </div>
    </form>
    <div class="actions d-flex justify-content-end">
        <div>

        </div>
        <button class="primary mt-3" (click)="nextStep()" [disabled]="managementForm.invalid">
            {{ 'next_step' | translate }}
        </button>
    </div>
</div>

<!-- STEP 2 – NOME -->
<div class="steps-wrapper" *ngIf="step == 2">
    <form class="form-card mt-3" [formGroup]="competitionForm" (keydown.enter)="nextStep()">
        <label class="field">
            <span class="label">{{ 'competition_name_label' | translate }}</span>
            <input class="input" type="text" [placeholder]="'competition_name_placeholder' | translate"
                formControlName="nameCtrl" autocomplete="off" />
            <small class="error" *ngIf="nameCtrl.invalid && nameCtrl.touched">
                {{ 'competition_name_error_minlength' | translate }}
            </small>
        </label>
    </form>
    <div class="actions d-flex justify-content-between">
        <button class="primary bg-secondary mt-3" (click)="back()">{{ 'back' | translate }}</button>
        <button class="primary mt-3" (click)="nextStep()" [disabled]="competitionForm.get('nameCtrl')?.invalid">
            {{ 'next_step' | translate }}
        </button>
    </div>
</div>

<!-- STEP 3 – TIPOLOGIA -->
<div class="steps-wrapper" *ngIf="step == 3">
    <form class="form-card mt-3" [formGroup]="competitionForm" (keydown.enter)="nextStep()">
        <div class="field">
            <span class="label">{{ 'competition_type_label' | translate }}</span>
            <div class="segmented" role="radiogroup" [attr.aria-label]="'competition_type_label' | translate">
                <label class="seg-item">
                    <input type="radio" value="league" formControlName="typeCtrl" />
                    <span class="large-img-select">
                        <span>{{ 'competition_type_league' | translate }}</span>
                        <img src="/numbered-list.png" alt="">
                    </span>
                </label>

                <label class="seg-item disabled">
                    <span class="large-img-select">
                        <div class="not-available">
                            {{ 'not_available' | translate }}
                            <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                        </div>
                        <span class="marquee">{{ 'competition_type_elimination' | translate }}</span>
                    </span>
                </label>

                <label class="seg-item disabled">
                    <span class="large-img-select">
                        <div class="not-available">
                            {{ 'not_available' | translate }}
                            <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>
                        </div>
                        <span>{{ 'competition_type_group_knockout' | translate }}</span>
                    </span>
                </label>
            </div>
        </div>
    </form>
    <div class="actions d-flex justify-content-between" (keydown.enter)="nextStep()">
        <button class="primary bg-secondary mt-3" (click)="back()">{{ 'back' | translate }}</button>
        <button class="primary mt-3" (click)="nextStep()" [disabled]="competitionForm.get('typeCtrl')?.invalid">
            {{ 'next_step' | translate }}
        </button>
    </div>
</div>

<!-- STEP 4 – SET -->
<div class="steps-wrapper" *ngIf="step == 4">
    <form class="form-card mt-3" [formGroup]="competitionForm" (keydown.enter)="nextStep()">
        <div class="field">
            <span class="label">{{ 'competition_sets_label' | translate }}</span>
            <div class="segmented" role="radiogroup" [attr.aria-label]="'competition_sets_label' | translate">
                <label class="seg-item"><input type="radio" formControlName="setsCtrl"
                        [value]="2" /><span class="p-3">2</span></label>
                <label class="seg-item"><input type="radio" formControlName="setsCtrl"
                        [value]="3" /><span class="p-3">3</span></label>
                <label class="seg-item"><input type="radio" formControlName="setsCtrl"
                        [value]="5" /><span class="p-3">5</span></label>
            </div>
        </div>
    </form>
    <div class="actions d-flex justify-content-between">
        <button class="primary bg-secondary mt-3" (click)="back()">{{ 'back' | translate }}</button>
        <button class="primary mt-3" (click)="nextStep()" [disabled]="competitionForm.get('setsCtrl')?.invalid">
            {{ 'next_step' | translate }}
        </button>
    </div>
</div>

<!-- STEP 5 – PUNTI -->
<div class="steps-wrapper" *ngIf="step == 5" (keydown.enter)="nextStep()">
    <form class="form-card mt-3" [formGroup]="competitionForm">
        <div class="field">
            <span class="label">{{ 'competition_points_label' | translate }}</span>
            <div class="segmented" role="radiogroup" [attr.aria-label]="'competition_points_label' | translate">
                <label class="seg-item"><input type="radio" formControlName="pointsCtrl"
                        [value]="11" /><span class="p-3">11</span></label>
                <label class="seg-item"><input type="radio" formControlName="pointsCtrl"
                        [value]="21" /><span class="p-3">21</span></label>
            </div>
        </div>
    </form>
    <div class="actions d-flex justify-content-between">
        <button class="primary bg-secondary mt-3" (click)="back()">{{ 'back' | translate }}</button>
        <button class="primary mt-3" (click)="nextStep()" [disabled]="competitionForm.get('pointsCtrl')?.invalid">
            {{ 'next_step' | translate }}
        </button>
    </div>
</div>

<!-- STEP 6 – RIEPILOGO -->
<div class="steps-wrapper" *ngIf="step == 6">
    <div class="summary form-card mt-3">
        <ul>
            <li *ngIf="managementForm.value.isPartOfCompetitionCtrl"><i class="fa fa-registered"></i> {{ 'is_part_of_competition' | translate }}</li>
            <li>{{ 'management' | translate }}: {{ managementForm.value.managementCtrl }}</li>
            <li>{{ 'name' | translate }}: {{ competitionForm.value.nameCtrl }}</li>
            <li>{{ 'competition_type_label' | translate }}: {{ competitionForm.value.typeCtrl }}</li>
            <li>{{ 'competition_sets_label' | translate }}: {{ competitionForm.value.setsCtrl }}</li>
            <li>{{ 'competition_points_label' | translate }}: {{ competitionForm.value.pointsCtrl }}</li>
        </ul>
    </div>
    <div class="actions d-flex justify-content-between">
        <button class="primary bg-secondary mt-3" (click)="back()">{{ 'back' | translate }}</button>
        <button class="primary mt-3 flex-grow-1 ms-3" (click)="submit()" [disabled]="competitionForm.invalid">
            {{ 'competition_action_create' | translate }}
        </button>
    </div>
</div>